{% extends "base.html" %}

{% block title %}{{ post.title }} - {{ site.title }}{% endblock %}

{% block description %}{{ post.description or site.description }}{% endblock %}

{% block og_title %}{{ post.title }}{% endblock %}
{% block og_description %}{{ post.description or site.description }}{% endblock %}
{% block og_type %}article{% endblock %}
{% block og_url %}<meta property="og:url" content="{{ site.url }}{{ post.url }}">{% endblock %}
{% block og_image %}{% if post.image %}<meta property="og:image" content="{{ post.image }}">{% endif %}{% endblock %}
{% block twitter_title %}{{ post.title }}{% endblock %}
{% block twitter_description %}{{ post.description or site.description }}{% endblock %}

{% block content %}
<article class="post">
    <header class="post-header">
        <h1 class="post-title">{{ post.title }}</h1>
        <div class="post-meta">
            {% if post.date %}
            <time class="post-date" datetime="{{ post.date }}">{{ post.date | format_date }}</time>
            {% endif %}
            {% if post.author or site.author %}
            <span class="post-author">{% if post.date %} · {% endif %}{{ post.author or site.author }}</span>
            {% endif %}
            <span class="reading-time">{% if post.date or post.author or site.author %} · {% endif %}{{ post.reading_time }}</span>
        </div>
        {% if post.tags %}
        <div class="post-tags">
            {% for tag in post.tags %}
            <span class="tag {% if loop.index is odd %}tag-green{% else %}tag-blue{% endif %}">{{ tag }}</span>
            {% endfor %}
        </div>
        {% endif %}
    </header>

    {% if notes %}
    <aside class="notes">
        {% for note in notes %}
        <div class="note {% if note.is_public %}note-public{% else %}note-private{% endif %}">
            <p>{{ note.text }}</p>
            <span class="note-author">- {{ note.author }}</span>
        </div>
        {% endfor %}
    </aside>
    {% endif %}

    <div class="post-content">
        {{ post.html | safe }}
    </div>

    <footer class="post-footer">
        <a href="/posts" class="back-link">&larr; Back to posts</a>
    </footer>
</article>
{% endblock %}
